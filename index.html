<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TranslationPlugin by Yii.Guxing</title>
    <link rel="icon" href="favicon.ico">
    <meta name="description" content="IntelliJ-based IDEs/Android Studio 翻译插件，支持多语言互译、文档翻译、语音朗读...">
    <meta name="keywords" content="IDEA Plugin,IDEA Translation Plugin,IDEA 插件,IDEA 翻译插件,插件">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
    <link rel="stylesheet" href="css/app.css">
</head>
<body>
<nav class="app-nav">
    <div class="left">
        <a id="home" class="nav-logo">
            <img src="img/logo.svg" width="40" height="40" alt="logo">
            <span>Translation Plugin</span>
        </a>
        <a id="docs">文档</a>
        <a id="updates">更新</a>
        <a id="d">支持与赞助</a>
    </div>

    <a href="#/">EN</a>
    <a href="#/zh-cn/">中文</a>
</nav>
<div id="app"></div>
<script>
    function plugin(hook, vm) {
        initPlugin(vm)

        hook.mounted(function () {
            initNav(vm);
        });
    }

    function initPlugin(vm) {
        var updatesPathRegex = /^\/((en|ja|ko)\/)?updates(\/.*)?$/;
        Object.defineProperty(vm.config, "loadSidebar", {
            get: function () {
                return updatesPathRegex.test(vm.route.path) ? "_sidebar.md" : false;
            }
        });
    }

    function initNav(vm) {
        var nav = document.querySelector(".app-nav");
        var cover = document.querySelector(".cover");
        if (nav && cover && typeof cover.after === "function") {
            cover.after(nav);
        }

        initHomeLink(vm)
    }

    function initHomeLink(vm) {
        document.querySelector("#home").onclick = function () {
            if (/^\/((en|ja|ko)\/)?$/.test(vm.route.path)) {
                var cover = document.querySelector("section.cover.show");
                if (cover) {
                    cover.scrollIntoView({behavior: "smooth", block: "start"});
                    return;
                }
            }

            window.location.href = "#" + getLanguagePath(vm)
        }
    }

    function getLanguagePath(vm) {
        var result = /^(\/((en|ja|ko)\/)?)/.exec(vm.route.path);
        return result && result[0] || "/"
    }

    window.$docsify = {
        coverpage: true,
        loadSidebar: true,
        relativePath: true,
        plugins: [plugin]
    }
</script>
<!-- Docsify v4 -->
<script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
</body>
</html>
